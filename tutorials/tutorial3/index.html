<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>3. Lookups and transformers - HEADFAKE</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="//use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet" />
  <link href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css" rel="stylesheet" />
  <link href="../../css/mkapi-common.css" rel="stylesheet" />
  <link href="../../css/mkapi-readthedocs.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "3. Lookups and transformers";
    var mkdocs_page_input_path = "tutorials/tutorial3.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> HEADFAKE</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../usage/">Usage</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../tutorial1/">1. Generating fake data files</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tutorial2/">2. Templates and conditional logic</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">3. Lookups and transformers</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#aims-of-tutorial">Aims of tutorial</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#add-title-field-based-on-gender-and-marital-status">Add title field based on gender and marital status</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#enhancing-conditional-fields-with-probability">Enhancing conditional fields with probability</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#analysis">Analysis</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Discussion</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../discussion/initialising-headfake/">Initialising Headfake</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">How to..</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../how-to/create-custom-fields/">Create custom fields</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../how-to/create-custom-transformers/">Create custom transformers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../how-to/add-a-lookup-field/">Add a lookup field</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../how-to/generate-identical-datasets/">Generate identical datasets</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/headfake/">headfake</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">field</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../api/field/core/">core</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../api/field/id/">id</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../api/field/faker/">faker</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../api/field/derived/">derived</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/cli/">cli</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/fieldset/">fieldset</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/transformer/">transformer</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/output/">output</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/error/">error</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/util/">util</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">HEADFAKE</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorials &raquo;</li>
        
      
    
    <li>3. Lookups and transformers</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/rcfgroup/headfake/edit/master/docs/tutorials/tutorial3.md"> Edit on headfake</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="tutorial-3-adding-conditional-fields">Tutorial 3. Adding conditional fields</h1>
<h2 id="aims-of-tutorial">Aims of tutorial</h2>
<p>This tutorial will introduce a way of adding conditional logic for field value generation.</p>
<h2 id="add-title-field-based-on-gender-and-marital-status">Add title field based on gender and marital status</h2>
<p>Conditional logic is handled using the IfElseField. To demonstrate how these fields work we will create some simple logic to generate the title of an individual, using the gender field and marital status field.</p>
<p>To keep it simpler at this stage we will not take into account other possible titles such as Ms. or Dr.</p>
<p>Open <code>tutorial2.yml</code>, add a new field as below and save as <code>tutorial3.yml</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">title</span><span class="p">:</span>
    <span class="nt">class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">headfake.field.IfElseField</span>
    <span class="nt">condition</span><span class="p">:</span>
        <span class="nt">class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">headfake.field.Condition</span>
        <span class="nt">field</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gender</span>
        <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">operator.equals</span>
        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M</span>
    <span class="nt">true_value</span><span class="p">:</span>
        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MR</span>
    <span class="nt">false_value</span><span class="p">:</span>
        <span class="nt">class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">headfake.field.IfElseField</span>
        <span class="nt">condition</span><span class="p">:</span>
            <span class="nt">field</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">marital_status</span>
            <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">equals</span>
            <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">M</span>
        <span class="nt">true_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MRS</span>
        <span class="nt">false_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MISS</span>
</code></pre></div>

<p>Then try running it:</p>
<div class="codehilite"><pre><span></span><code>headfake /path/to/tutorial3.yml
</code></pre></div>

<p>You should now see that the 'title' field uses the 'gender' field as a lookup. If the value is 'M' it returns 'MR', if not then it uses another IfElse to look at the marital status. If this is 'M' then it returns 'MRS' and if not 'MISS'.</p>
<p>The IfElseField is quite flexible. If there is a string or number in the true_value/false_value option it will return that value, if it is a field definition it will return the generated value from the field.</p>
<h2 id="enhancing-conditional-fields-with-probability">Enhancing conditional fields with probability</h2>
<p>Let's improve this field by adding some level of chance to it and take into account other possible titles. Change the 'false_value: MISS' line to:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">false</span><span class="p">:</span>
    <span class="nt">class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OptionValueField</span>
    <span class="nt">probabilities</span><span class="p">:</span>
        <span class="nt">MISS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.7</span>
        <span class="nt">MS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.1</span>
        <span class="nt">DR</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.1</span>
        <span class="nt">PROF</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.1</span>
</code></pre></div>

<p>And rerun headfake:
 <code>headfake /path/to/tutorial3.yml</code></p>
<p>You should now see that the output of title is now randomly either MISS, MS, DR or PROF based on the provided probabilities.</p>
<h3 id="analysis">Analysis</h3>
<p>In this tutorial we showed how Headfake can be used to create fields dependent on the values of others. The ability to nest the if/else fields with constants or other field types can add a huge amount of variety to the data generation process.</p>
<p>This is the final tutorial. For more information about the field types in Headfake you can look at the API section of the documentation. Additionally, you can also <a href="/how-to/create-custom-field">create and use your own pretty easily</a> if you find none of them meet your needs.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../discussion/initialising-headfake/" class="btn btn-neutral float-right" title="Initialising Headfake">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tutorial2/" class="btn btn-neutral" title="2. Templates and conditional logic"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../tutorial2/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../discussion/initialising-headfake/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../js/mkapi.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
